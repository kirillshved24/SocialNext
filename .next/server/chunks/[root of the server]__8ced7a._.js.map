{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file://D%3A/SocialNext/my-app/src/models/User.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst userSchema = new mongoose.Schema({\r\n  username: { type: String, required: true, unique: true },\r\n  password: { type: String, required: true },\r\n  email: { type: String, required: true, unique: true },\r\n  isAdmin: { type: Boolean, default: false },\r\n});\r\n\r\nexport default mongoose.models.User || mongoose.model('User', userSchema);"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,aAAa,IAAI,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC;IACrC,UAAU;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACvD,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,OAAO;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACpD,SAAS;QAAE,MAAM;QAAS,SAAS;IAAM;AAC3C;uCAEe,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file://D%3A/SocialNext/my-app/src/lib/auth.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\r\n\r\nconst SECRET_KEY = process.env.SECRET_KEY || 'your_secret_key';\r\n\r\nexport const generateToken = (payload) => {\r\n  return jwt.sign(payload, SECRET_KEY, { expiresIn: '1h' });\r\n};\r\n\r\nexport const verifyToken = (token) => {\r\n  try {\r\n    return jwt.verify(token, SECRET_KEY);\r\n  } catch (err) {\r\n    throw new Error('Неверный или истекший токен');\r\n  }\r\n};"],"names":[],"mappings":";;;;;;;;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAEtC,MAAM,gBAAgB,CAAC;IAC5B,OAAO,IAAI,IAAI,CAAC,SAAS,YAAY;QAAE,WAAW;IAAK;AACzD;AAEO,MAAM,cAAc,CAAC;IAC1B,IAAI;QACF,OAAO,IAAI,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,KAAK;QACZ,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file://D%3A/SocialNext/my-app/src/lib/db.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst MONGO_URI = 'mongodb+srv://kirillshved96:hsX2bhLX1uR9M8yf@socialnext.5uzui.mongodb.net/?retryWrites=true&w=majority&appName=SocialNext';\r\n\r\nlet isConnected = false;\r\n\r\nconst connectDB = async () => {\r\n  if (isConnected) {\r\n    console.log('Используется существующее подключение к MongoDB');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const connection = await mongoose.connect(MONGO_URI);\r\n    isConnected = !!connection.connections[0].readyState;\r\n    console.log('Подключено к MongoDB');\r\n  } catch (error) {\r\n    console.error('Ошибка подключения к MongoDB:', error);\r\n\r\n    // Специфическая обработка для ENODATA\r\n    if (error.code === 'ENODATA') {\r\n      console.error(\r\n        'Ошибка DNS. Проверьте строку подключения (MONGO_URI) и убедитесь, что ваш кластер MongoDB доступен. Если используется MongoDB Atlas, убедитесь, что вы указали правильный \"cluster-url\".'\r\n      );\r\n    }\r\n\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport default connectDB;"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,YAAY;AAElB,IAAI,cAAc;AAElB,MAAM,YAAY;IAChB,IAAI,aAAa;QACf,QAAQ,GAAG,CAAC;QACZ;IACF;IAEA,IAAI;QACF,MAAM,aAAa,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC;QAC1C,cAAc,CAAC,CAAC,WAAW,WAAW,CAAC,EAAE,CAAC,UAAU;QACpD,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAE/C,sCAAsC;QACtC,IAAI,MAAM,IAAI,KAAK,WAAW;YAC5B,QAAQ,KAAK,CACX;QAEJ;QAEA,MAAM;IACR;AACF;uCAEe"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file://D%3A/SocialNext/my-app/src/app/api/users/route.js"],"sourcesContent":["import User from '@/models/User';\r\nimport { generateToken } from '@/lib/auth';\r\nimport connectDB from '@/lib/db';\r\n\r\nexport default async function handler(req, res) {\r\n  if (req.method !== 'POST') {\r\n    return res.status(405).json({ error: `Метод ${req.method} не поддерживается` });\r\n  }\r\n\r\n  try {\r\n    await connectDB();\r\n\r\n    const { username, password, email } = req.body;\r\n\r\n    if (!username || !password || !email) {\r\n      return res.status(400).json({ error: 'Все поля обязательны' });\r\n    }\r\n\r\n    // Создаём нового пользователя\r\n    const newUser = new User({ username, password, email });\r\n    await newUser.save();\r\n\r\n    // Генерируем JWT\r\n    const token = generateToken({ id: newUser._id, username: newUser.username });\r\n\r\n    // Устанавливаем куки с токеном\r\n    res.setHeader('Set-Cookie', `authorization=Bearer ${token}; HttpOnly; Path=/; Max-Age=3600;`);\r\n\r\n    // Отправляем успешный ответ\r\n    res.status(201).json(newUser);\r\n  } catch (error) {\r\n    res.status(500).json({ error: 'Ошибка при регистрации', details: error.message });\r\n  }\r\n}"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,CAAC,MAAM,EAAE,IAAI,MAAM,CAAC,kBAAkB,CAAC;QAAC;IAC/E;IAEA,IAAI;QACF,MAAM,CAAA,GAAA,kHAAA,CAAA,UAAS,AAAD;QAEd,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,IAAI,IAAI;QAE9C,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,OAAO;YACpC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAuB;QAC9D;QAEA,8BAA8B;QAC9B,MAAM,UAAU,IAAI,uHAAA,CAAA,UAAI,CAAC;YAAE;YAAU;YAAU;QAAM;QACrD,MAAM,QAAQ,IAAI;QAElB,iBAAiB;QACjB,MAAM,QAAQ,CAAA,GAAA,oHAAA,CAAA,gBAAa,AAAD,EAAE;YAAE,IAAI,QAAQ,GAAG;YAAE,UAAU,QAAQ,QAAQ;QAAC;QAE1E,+BAA+B;QAC/B,IAAI,SAAS,CAAC,cAAc,CAAC,qBAAqB,EAAE,MAAM,iCAAiC,CAAC;QAE5F,4BAA4B;QAC5B,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;IACvB,EAAE,OAAO,OAAO;QACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;YAA0B,SAAS,MAAM,OAAO;QAAC;IACjF;AACF"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}