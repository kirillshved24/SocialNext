(()=>{var e={};e.id=105,e.ids=[105],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},3934:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>u,routeModule:()=>c,tree:()=>l});var s=r(260),a=r(8203),o=r(5155),i=r.n(o),n=r(7292),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let l=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7154)),"D:\\SocialNext\\my-app\\src\\app\\dashboard\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,3405)),"D:\\SocialNext\\my-app\\src\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"D:\\SocialNext\\my-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["D:\\SocialNext\\my-app\\src\\app\\dashboard\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},c=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4535:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},1327:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,7174,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},4685:(e,t,r)=>{Promise.resolve().then(r.bind(r,1354))},3245:(e,t,r)=>{Promise.resolve().then(r.bind(r,9384))},6487:()=>{},8335:()=>{},9384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(5512),a=r(8009),o=r(2273),i=r(2231),n=r(903),d=r(747);let l=(0,i.U1)({reducer:{posts:n.Ay,auth:d.Ay}});var u=r(9334),p=r(154),c=r(3677);let h=({routes:e})=>{let t=(0,u.usePathname)();return(0,a.useEffect)(()=>{let r=e.find(e=>e.path===t),s=r?.title||"Социальная сеть";document.title=s},[t,e]),null};var m=r(8531),x=r.n(m),f=r(1643);let g=f.Ay.div`
display: flex;
    gap: 15px;
    justify-content: space-between;
    max-width: 580px;
    margin: 0 auto;
    flex-wrap: wrap;
    margin-top:40px;
`,v=(0,f.Ay)(x())`
font-size:16px;
text-decoration:none;
color:black;

&.active{
color:red;
}

&:hover{
text-decoration:underline;
}
`;f.Ay.div`
  font-size: 16px;
  font-weight: 500;
  color: #333;
`;let y=({children:e})=>{let{currentUser:t}=(0,o.d4)(e=>e.auth),r=(0,o.wA)(),a=(0,u.useRouter)();return console.log("AppLayout рендерится"),(0,s.jsxs)(p.m,{children:[(0,s.jsx)(h,{routes:[]}),(0,s.jsx)(g,{children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{href:"/home",children:"Главная"}),(0,s.jsx)(v,{href:"/posts",children:"Посты"}),(0,s.jsx)(v,{href:"/friends",children:"Друзья"}),(0,s.jsx)(c.$,{onClick:()=>{r((0,d.ri)()),a.push("/login")},children:"Выйти"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{href:"/login",children:"Вход"}),(0,s.jsx)(v,{href:"/register",children:"Регистрация"})]})}),e&&(0,s.jsx)("div",{children:e})]})},b=function({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{children:(0,s.jsx)(o.Kq,{store:l,children:(0,s.jsx)(y,{children:e})})})})}},747:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>p,_J:()=>n,gT:()=>o,iD:()=>l,oe:()=>i,ri:()=>u});var s=r(2231),a=r(5668);(0,s.zD)("auth/loginUser",async({username:e,password:t},{rejectWithValue:r})=>{try{let{token:r}=(await a.A.post("/api/auth/login",{username:e,password:t})).data;return console.log("Токен после логина:",r),localStorage.setItem("token",r),{...JSON.parse(atob(r.split(".")[1])),token:r}}catch(e){return r(e.response?.data||e.message)}}),(0,s.zD)("auth/registerUser",async({username:e,password:t,email:r},{rejectWithValue:s})=>{try{let{token:s}=(await a.A.post("/api/auth/register",{username:e,password:t,email:r})).data;return localStorage.setItem("token",s),{...JSON.parse(atob(s.split(".")[1])),token:s}}catch(e){return s(e.response?.data||e.message)}});let o=(0,s.zD)("auth/fetchFriends",async(e,{rejectWithValue:t})=>{try{let t=localStorage.getItem("token");if(!t)throw Error("Нет доступа: пользователь не авторизован");return(await a.A.get("/api/friends",{params:{userId:e},headers:{Authorization:`Bearer ${t}`}})).data}catch(e){return t(e.response?.data||e.message)}}),i=(0,s.zD)("auth/addFriendToServer",async({friendId:e},{rejectWithValue:t})=>{try{let t=localStorage.getItem("token");if(!t)throw Error("Нет доступа: пользователь не авторизован");return(await a.A.post("/api/friends",{friendId:e},{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){return t(e.response?.data||e.message)}}),n=(0,s.zD)("auth/removeFriendFromServer",async({userId:e,friendId:t},{rejectWithValue:r})=>{try{let r=localStorage.getItem("token");if(!r)throw Error("Нет доступа: пользователь не авторизован");return await a.A.delete("/api/friends",{data:{userId:e,friendId:t},headers:{Authorization:`Bearer ${r}`}}),{userId:e,friendId:t}}catch(e){return r(e.response?.data||e.message)}}),d=(0,s.Z0)({name:"auth",initialState:{currentUser:null,isAdmin:!1,isAuthenticated:!1,friends:[],status:"idle",error:null},reducers:{login:(e,t)=>{let{username:r,email:s,id:a,isAdmin:o,token:i}=t.payload;e.currentUser={username:r,email:s,id:a},e.isAdmin=o,e.isAuthenticated=!0,localStorage.setItem("token",i)},logout:e=>{localStorage.removeItem("token"),e.currentUser=null,e.isAdmin=!1,e.isAuthenticated=!1,e.friends=[]}},extraReducers:e=>{e.addCase(o.pending,e=>{e.status="loading"}).addCase(o.fulfilled,(e,t)=>{e.status="succeeded",e.friends=t.payload}).addCase(o.rejected,(e,t)=>{e.status="failed",e.error=t.payload}).addCase(i.pending,e=>{e.status="loading"}).addCase(i.fulfilled,(e,t)=>{e.status="succeeded",e.friends.push(t.payload)}).addCase(i.rejected,(e,t)=>{e.status="failed",e.error=t.payload}).addCase(n.pending,e=>{e.status="loading"}).addCase(n.fulfilled,(e,t)=>{e.status="succeeded",e.friends=e.friends.filter(e=>e.id!==t.payload.friendId)}).addCase(n.rejected,(e,t)=>{e.status="failed",e.error=t.payload})}}),{login:l,logout:u}=d.actions,p=d.reducer},903:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,SD:()=>a,gg:()=>i});let s=(0,r(2231).Z0)({name:"posts",initialState:{posts:[]},reducers:{addPost:(e,t)=>{let r={...t.payload,comments:[]};e.posts.push(r)},deletePost:(e,t)=>{let{postId:r,currentUser:s,isAdmin:a}=t.payload;e.posts=e.posts.filter(e=>e.id!==r||!(a||e.author?.username===s?.username))},updatePost:(e,t)=>{let r=e.posts.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.posts[r]={...e.posts[r],...t.payload})},addComment:(e,t)=>{let r=e.posts.find(e=>e.id===t.payload.postId);r&&r.comments.push(t.payload.comment)}}}),{addPost:a,deletePost:o,updatePost:i,addComment:n}=s.actions,d=s.reducer},3677:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var s=r(5512);r(8009);var a=r(1643);let o=a.Ay.button`
  border-radius: 10px;
    color: white;
    transition: .2s linear;
    background: #0B63F6;
    padding: 5px 15px;
    cursor:pointer;

    &:hover{
  box-shadow: 0 0 0 2px white, 0 0 0 4px #3C82F8;
    }
`,i=({children:e,...t})=>(0,s.jsx)(o,{...t,children:e})},154:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var s=r(5512);r(8009);var a=r(1643);let o=a.Ay.div`
    max-width: 1024px;
    margin: 0 auto;
    gap: 20px;
    margin-top: 50px;
`,i=({children:e})=>(0,s.jsx)(o,{children:e})},3405:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(2740);function a({children:e}){return(0,s.jsx)("div",{children:e})}},7154:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(2740);function a(){return(0,s.jsx)("div",{children:"Dashboard Page"})}},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\SocialNext\\\\my-app\\\\src\\\\app\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\SocialNext\\my-app\\src\\app\\layout.tsx","default")},440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(8077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994,223,77],()=>r(3934));module.exports=s})();